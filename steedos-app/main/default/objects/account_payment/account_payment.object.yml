name: account_payment
label: 付款记录
icon: account
enable_api: true
enable_approvals: true
enable_files: true
enable_share: true
form:
  initialValues: !<tag:yaml.org,2002:js/function> |-
    function anonymous(
    ) {

      if(Session.get("record_id")){
        var mainRecord = Creator.odata.get(Session.get("object_name"), Session.get("record_id"), 'company_id,currency_type,othercompany');
        var pk_org = '';
        var currtype = '';
        var supplier = '';
        if(mainRecord){
          pk_org = mainRecord.company_id
          currtype = mainRecord.currency_type
          if(_.isArray(mainRecord.othercompany) && mainRecord.othercompany.length > 0){
            supplier = mainRecord.othercompany[0];
          }
        }
        return {
          payment_company_id: pk_org,
          currtype: currtype,
          supplier: supplier
        } 
      }

    }
relatedList:
  - account_payment_details
  - cms_files
  - approvals
