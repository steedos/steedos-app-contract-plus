name: owner_organization
label: 执行人部门
optionsFunction: !<tag:yaml.org,2002:js/function> |-
  function anonymous(values
  ) {

    var _options = [];
    var companyId = values.company_id;
    if (!companyId) {
      return;
    }
    if(!_.isString(companyId)) {
      companyId = values.company_id._id
    }
    var departments = Creator.odata.query('department', {$filter: "(company_id eq '" + companyId + "')", $select: 'name'}, true);
    if (departments){
      _.each(departments, function(item){
        _options.push({value: item._id, label: item.name});
      })
    }
    return _options;

  }
reference_to: department
searchable: true
sort_no: 170
type: lookup
