name: customer_bank
filterable: false
hidden: false
index: false
is_name: false
is_wide: false
label: 客户银行账户
multiple: false
omit: false
optionsFunction: !<tag:yaml.org,2002:js/function> |-
  function(values
  ) {


    if (!values || !values.customer) {
      return [];
    }
    var accountId = _.isObject(values.customer) ? values.customer._id : values.customer;;
    var options, result, customer_banks;
    result = [];
    options = {
      $filter: `(account eq '${accountId}') and (enablestate eq 'enable')`,
      $select: 'accnum'
    };
    customer_banks = Creator.odata.query('account_banks', options, true);
    customer_banks.forEach(function (sb) {
      return result.push({
        label: sb.accnum,
        value: sb._id
      });
    })
    return result;


  }
readonly: false
reference_to: account_banks
required: false
searchable: false
sort_no: 120
sortable: false
type: lookup
